<!DOCTYPE html>
<!-- saved from url=(0047)http://www.devforrest.com/examples/cvt/cvt.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8">

<title>Voronoi Treemap</title>

<script language="javascript" type="text/javascript" src="jquery-1.11.0.min.js"></script>
<!-- <script language="javascript" type="text/javascript" src="d3.v2.js"></script> -->
<script language="javascript" type="text/javascript" src="d3-master/d3.js"></script>
<script language="javascript" type="text/javascript" src="ConvexHull.js"></script>
<script language="javascript" type="text/javascript" src="PowerDiagram.js"></script>
<script language="javascript" type="text/javascript" src="VoronoiTreemap.js"></script>

<!-- test input local filesystem -->
<script language="javascript" type="text/javascript" src="flare.js"></script>
<script language="javascript" type="text/javascript" src="simple.js"></script>
<script language="javascript" type="text/javascript" src="simple_four.js"></script>


</head>
 
<body>

<!--
<script>
 //Make an SVG Container
 var svgContainer = d3.select("body").append("svg")
                                     .attr("width", 200)
                                     .attr("height", 200);
 
 //Draw the Circle
 var circle = svgContainer.append("circle")
                          .attr("cx", 30)
                          .attr("cy", 30)
                         .attr("r", 20)
						 .style("fill", "black");
</script>
-->


<h2>Voronoi Treemap</h2>



<!--
<div id="div1">This is div1</div><br><br>
-->



<script language="javascript">
var width = 510;
var height = 510;
var svn_container = d3.select("body").append("svg").attr("width",width).attr("height",height);
var svg_poly = [[0,0],[0,height],[width,height],[width,0]];
var polygon_list = []; // start empty

var n1 = 10;
var n2 = 140;
var n3 = 370;
var n4 = 500;
var octogon_poly = [[n1, n2], [n1, n3], [n2, n4], [n3, n4], [n4, n3], [n4, n2], [n3, n1], [n2, n1]];

// TEST CASE
//var square_poly = [[-1000,-1000],[-1000, 2000],[2000,2000],[2000, -1000]];

var square_poly = [[0, 0],[0, 1000],[1000,1000],[1000, 0]];

function make_d3_poly(d) {
	return "M" + d.join("L") + "Z";
}

function stupid_draw() {
	var polylines = svn_container.append("g").selectAll("path").data(polygon_list, make_d3_poly);
	polylines.enter().append("path")
		.attr("d", make_d3_poly)
		.attr("stroke-width", "10px")
		.attr("stroke", "black")
		.attr("fill", "cyan");
	//polylines.update();
}

var sites = VoronoiTreemap.initSites(square_poly, simple_four_json);
for (var i = 0; i < 100; i++) {
	var polygons_and_sites = VoronoiTreemap.computeVoronoiTreemapSingleWithSites(square_poly, simple_four_json, sites, 1);
	polygon_list = polygons_and_sites[0];
	sites = polygons_and_sites[1];
	stupid_draw();
	alert("stupid_draw");
}

	
</script>



</body></html>
